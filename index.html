<!DOCTYPE html>
<html>
  <head>
  <meta name='referrer' content='no-referrer'>
    <meta name='viewport' content='width=device-width,initial-scale=1.0' />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.0.7/shaka-player.ui.min.js'></script>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.0.7/controls.min.css' />
        <style>

      .shaka-spinner-container, .shaka-current-time, .shaka-progress-container {
        display: none !important;
      }


    </style>
  </head>
  <body bgcolor='black' style='margin:0'>
    <div data-shaka-player-container style='position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;object-fit:cover;'>
     <video autoplay data-shaka-player id='video' style='width:100%;height:100%;'></video>
    </div>
    <script>
        
    var reloadtime = 1000;
      async function init() {
        const video = document.getElementById('video');
        const ui = video.ui;
        const controls = ui.getControls();
        const player = controls.getPlayer();
		
        player.configure({
          drm: {
            servers: {
              'com.widevine.alpha': 'https://azy4sj9b.anycast.nagra.com/AZY4SJ9B/wvls/contentlicenseservice/v1/licenses'
            }
          },
           abr: {
      enabled: true,
      defaultBandwidthEstimate: 100,
      restrictions: {
        maxHeight: 240,

        }
        }
        });
        window.player = player;
        window.ui = ui;
        player.addEventListener('error', onPlayerErrorEvent);
        controls.addEventListener('error', onUIErrorEvent);
        player.getNetworkingEngine().registerRequestFilter(function(type, request) {
          if (type == shaka.net.NetworkingEngine.RequestType.LICENSE) {
          request.headers['User-Agent'] = 'ReactNativeVideo/3.0 (Linux;Android 11) ExoPlayerLib/2.10.4';
			request.headers['referer'] = 'app.azamtvmax.com';
			request.headers['origin'] = 'app.azamtvmax.com';
            request.headers['nv-tenant-id'] = 'AZY4SJ9B';
            request.headers['nv-authorizations'] = "eyJraWQiOiI3NzUwOTAiLCJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ2ZXIiOiIxLjAiLCJjb250ZW50UmlnaHRzIjpbeyJjb250ZW50SWQiOiJDSC0zOTc0YzJjZC05ZWM0LTRkMDMtODJiMS05Yzk5Mzk3M2U0ODciLCJzdGFydCI6IjIwMjUtMDMtMzFUMDA6MDA6MDBaIiwiZW5kIjoiMjAzMC0wMi0xOVQwMDowMDowMFoiLCJ1c2FnZVJ1bGVzUHJvZmlsZUlkIjoiU0QifV0sInRlbmFudElkIjoiQVpZNFNKOUIiLCJ0eXAiOiJDb250ZW50QXV0aFoiLCJleHAiOjE3NTk0Nzc2MjAsImRldmljZSI6eyJ3YXRlcm1hcmtpbmciOnRydWUsImFjY291bnRJZCI6Ijc3OTExMSJ9fQ.kVJb8pQyusrzrgzGwKgWXsC9pbTjIr2hb70aes7206U";
          }
		  if (type == shaka.net.NetworkingEngine.RequestType.MANIFEST) {
		  request.headers['User-Agent'] = 'ReactNativeVideo/3.0 (Linux;Android 11) ExoPlayerLib/2.10.4';
			request.headers['referer'] = 'app.azamtvmax.com';
			request.headers['origin'] = 'app.azamtvmax.com';
          }
        });
        try {
          await player.load("https:\/\/cdnblncr.azamtvltd.co.tz\/live\/eds\/AzamSport1\/DASH\/AzamSport1.mpd?cdntoken=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJleHAiOjE3NTczNTM2MjAsInNpcCI6IjE1LjE1OC4xMS42In0.iD7L3fyRzr-tY4Xeu8f30XxdScFxSSVCdygVsgdKGWxBZXYnST8JNNIY3UIPUJBOio2vAGipK6861IrhOlalhw&hdnts=exp=1757353620~acl=\/*~hmac=9e17d240c0398440f2ba58b9aa27d178340cdff77f33825398c9de272dd19ad2");
          console.log('The video has now been loaded!')
          
          document.addEventListener('click', function() {video.play();});

        } catch (error) {
	  
        setTimeout(function() {
		
		  //reload webpage 
		  location.reload();
		}, reloadtime);

          onPlayerError(error)
        }
      }

      function onPlayerErrorEvent(errorEvent) {
	  
        setTimeout(function() {
		  // Code to be executed after 10 seconds
		  //reload webpage 
		  location.reload();
		}, reloadtime);

        onPlayerError(event.detail)
      }

      function onPlayerError(error) {
	  
        setTimeout(function() {
		  // Code to be executed after 10 seconds
		  //reload webpage 
		  location.reload();
		}, reloadtime);

        console.error('Error code', error.code, 'object', error)
      }

      function onUIErrorEvent(errorEvent) {
	  
        setTimeout(function() {
		  // Code to be executed after 10 seconds
		  //reload webpage 
		  location.reload();
		}, reloadtime);

        onPlayerError(event.detail)
      }

      function initFailed(errorEvent) {
	  
        setTimeout(function() {
		  // Code to be executed after 10 seconds
		  //reload webpage 
		  location.reload();
		}, reloadtime);

        console.error('Unable to load the UI library!')
      }
      document.addEventListener('shaka-ui-loaded', init);
      document.addEventListener('shaka-ui-load-failed', initFailed)

    </script>
</html>